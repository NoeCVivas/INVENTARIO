{% extends 'base.html' %}
{% block title %}Detalle de Producto{% endblock %}
{% block header %}{{ producto.nombre }}{% endblock %}

{% block content %}
<div class="card">
  <div class="card-body">
    <h5 class="card-title">Información del producto</h5>
    <ul class="list-group list-group-flush">
      <li class="list-group-item"><strong>Nombre:</strong> {{ producto.nombre }}</li>
      <li class="list-group-item"><strong>Descripción:</strong> {{ producto.descripcion }}</li>
      <li class="list-group-item"><strong>Precio:</strong> ${{ producto.precio }}</li>
      <li class="list-group-item"><strong>Stock actual:</strong> {{ producto.stock }}</li>
      <li class="list-group-item"><strong>Stock mínimo:</strong> {{ producto.stock_minimo }}</li>
    </ul>

    <div class="mt-3">
      <a href="{% url 'productos:producto_update' producto.pk %}" class="btn btn-primary">
        <i class="fas fa-edit"></i> Editar
      </a>
      <a href="{% url 'productos:producto_delete' producto.pk %}" class="btn btn-danger">
        <i class="fas fa-trash-alt"></i> Eliminar
      </a>
      <a href="{% url 'productos:producto_list' %}" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i> Volver
      </a>
    </div>
  </div>
</div>

<hr>

<h5>Últimos movimientos de stock</h5>
<table class="table table-sm table-striped">
  <thead>
    <tr>
      <th>Fecha</th>
      <th>Tipo</th>
      <th>Cantidad</th>
      <th>Motivo</th>
      <th>Usuario</th>
    </tr>
  </thead>
  <tbody>
    {% for movimiento in movimientos %}
    <tr>
      <td>{{ movimiento.fecha|date:"d/m/Y H:i" }}</td>
      <td>{{ movimiento.tipo }}</td>
      <td>{{ movimiento.cantidad }}</td>
      <td>{{ movimiento.motivo }}</td>
      <td>{{ movimiento.usuario }}</td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="5">No hay movimientos registrados.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
