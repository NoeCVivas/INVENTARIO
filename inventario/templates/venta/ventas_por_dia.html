{% extends 'base.html' %}
{% load static %}
{% block content %}
<h2 class="mt-4 mb-3 text-center">ðŸ“Š Ventas por DÃ­a</h2>

<div class="container">
  <canvas id="graficoVentas" height="100"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  fetch("{% url 'ventas:ventas_por_dia_json' %}")
    .then(response => response.json())
    .then(data => {
      const ctx = document.getElementById('graficoVentas').getContext('2d');
      new Chart(ctx, {
        type: 'line',
        data: {
          labels: data.labels,
          datasets: [{
            label: 'Total vendido por dÃ­a',
            data: data.data,
            borderColor: '#8B0000',
            backgroundColor: 'rgba(139,0,0,0.1)',
            fill: true,
            tension: 0.3,
            pointRadius: 4,
            pointBackgroundColor: '#8B0000'
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { display: true, position: 'top' },
            tooltip: {
              callbacks: {
                label: function(context) {
                  return '$ ' + context.parsed.y.toLocaleString('es-AR');
                }
              }
            }
          },
          scales: {
            y: {
              ticks: {
                callback: function(value) {
                  return '$ ' + value.toLocaleString('es-AR');
                }
              }
            }
          }
        }
      });
    });
</script>
{% endblock %}
