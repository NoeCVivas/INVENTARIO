{% extends 'base.html' %}

{% block content %}
<h2>Detalle de Venta</h2>

<div class="mb-3">
  <p><strong>CÃ³digo:</strong> {{ venta.codigo }}</p>
  <p><strong>Cliente:</strong> {{ venta.cliente.nombre }} ({{ venta.cliente.dni }})</p>
  <p><strong>DirecciÃ³n:</strong> {{ venta.cliente.direccion }}</p>
  <p><strong>Fecha:</strong> {{ venta.fecha|date:"d/m/Y" }}</p>
  <p><strong>Medio de Pago:</strong> {{ venta.get_medio_pago_display }}</p>
</div>

<table class="table table-bordered">
  <thead class="thead-dark">
    <tr>
      <th>Producto</th>
      <th>Cantidad</th>
      <th>Precio Unitario</th>
      <th>Subtotal</th>
    </tr>
  </thead>
  <tbody>
    {% for item in venta.items.all %}
    <tr>
      <td>{{ item.producto.nombre }}</td>
      <td>{{ item.cantidad }}</td>
      <td>${{ item.precio_unitario }}</td>
      <td>${{ item.subtotal }}</td>
    </tr>
    {% endfor %}
    <tr class="table-warning">
      <td colspan="3" class="text-right"><strong>Total</strong></td>
      <td><strong>${{ venta.total }}</strong></td>
    </tr>
  </tbody>
</table>

<div class="mt-4">
  <a href="{% url 'ventas:generar_factura_pdf' venta.id %}" class="btn btn-outline-primary">
    ðŸ§¾ Imprimir Factura PDF
  </a>

  <a href="{% url 'ventas:enviar_factura_email' venta.id %}" class="btn btn-outline-info">
    ðŸ“§ Enviar por Email
  </a>

  <a href="{% url 'ventas:venta_list' %}" class="btn btn-secondary">Volver al listado</a>
</div>
{% endblock %}
