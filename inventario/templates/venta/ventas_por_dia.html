{% extends 'base.html' %}
{% load static %}
{% block content %}
<h2 class="mt-4 mb-3 text-center text-vinoteca">ðŸ“Š Ventas por DÃ­a</h2>

<div class="container">
  <canvas id="graficoVentas" height="100"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  fetch("{% url 'ventas:ventas_por_dia_json' %}")
    .then(response => response.json())
    .then(data => {
      const ctx = document.getElementById('graficoVentas').getContext('2d');
      new Chart(ctx, {
        type: 'line',
        data: {
          labels: data.labels,
          datasets: [{
            label: 'Total vendido por dÃ­a',
            data: data.data,
            borderColor: '#4B1E1E',              // BorgoÃ±a profundo
            backgroundColor: 'rgba(201,166,107,0.3)', // Dorado suave translÃºcido
            fill: true,
            tension: 0.4,                        // Curvas mÃ¡s suaves
            pointRadius: 6,
            pointHoverRadius: 8,
            pointBackgroundColor: '#C9A66B',     // Dorado en puntos
            pointBorderColor: '#2C2C2C',         // Borde carbÃ³n
            pointStyle: 'circle'
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              display: true,
              position: 'top',
              labels: {
                color: '#2C2C2C',
                font: { family: 'Georgia', size: 14, weight: 'bold' }
              }
            },
            tooltip: {
              backgroundColor: '#4B1E1E',
              titleColor: '#F8F6F3',
              bodyColor: '#F8F6F3',
              borderColor: '#C9A66B',
              borderWidth: 1,
              callbacks: {
                label: function(context) {
                  return 'ðŸ’° $ ' + context.parsed.y.toLocaleString('es-AR');
                }
              }
            }
          },
          scales: {
            x: {
              ticks: {
                color: '#2C2C2C',
                font: { family: 'Georgia', size: 12 }
              },
              grid: { color: 'rgba(75,30,30,0.1)' }
            },
            y: {
              ticks: {
                color: '#2C2C2C',
                font: { family: 'Georgia', size: 12 },
                callback: function(value) {
                  return '$ ' + value.toLocaleString('es-AR');
                }
              },
              grid: { color: 'rgba(75,30,30,0.1)' }
            }
          }
        }
      });
    });
</script>
{% endblock %}
