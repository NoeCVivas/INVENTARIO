{% extends 'base.html' %}

{% block title %}Detalle de Venta{% endblock %}
{% block header %}<i class="fas fa-receipt"></i> Detalle de Venta{% endblock %}

{% block content %}
<div class="d-flex justify-content-center">
  <div class="card shadow-sm mb-4" style="width: 100%; max-width: 800px; background-color: #F8F6F3;">
    <div class="card-body">
      <h5 class="card-title text-vinoteca mb-3">InformaciÃ³n de la venta</h5>
      <ul class="list-group list-group-flush mb-4">
        <li class="list-group-item"><strong>CÃ³digo:</strong> {{ venta.codigo }}</li>
        <li class="list-group-item"><strong>Cliente:</strong> {{ venta.cliente.nombre }} ({{ venta.cliente.dni }})</li>
        <li class="list-group-item"><strong>DirecciÃ³n:</strong> {{ venta.cliente.direccion }}</li>
        <li class="list-group-item"><strong>Fecha:</strong> {{ venta.fecha|date:"d/m/Y" }}</li>
        <li class="list-group-item"><strong>Medio de Pago:</strong> {{ venta.get_medio_pago_display }}</li>
      </ul>

      <h5 class="mt-4">ðŸ›’ Productos vendidos</h5>
      <div class="table-responsive">
        <table class="table table-bordered table-hover">
          <thead style="background-color:#4B1E1E; color:#F8F6F3;">
            <tr>
              <th>Producto</th>
              <th>Cantidad</th>
              <th>Precio Unitario</th>
              <th>Subtotal</th>
            </tr>
          </thead>
          <tbody>
            {% for item in venta.items.all %}
            <tr>
              <td>{{ item.producto.nombre }}</td>
              <td>{{ item.cantidad }}</td>
              <td>${{ item.precio_unitario }}</td>
              <td>${{ item.subtotal }}</td>
            </tr>
            {% endfor %}
            <tr style="background-color:#C9A66B; color:#2C2C2C;">
              <td colspan="3" class="text-right"><strong>Total</strong></td>
              <td><strong>${{ venta.total }}</strong></td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="mt-4 d-flex justify-content-between">
        <a href="{% url 'ventas:generar_factura_pdf' venta.id %}" class="btn btn-outline-primary">
          <i class="fas fa-file-pdf"></i> Imprimir Factura PDF
        </a>
        <a href="{% url 'ventas:venta_list' %}" class="btn btn-outline-secondary">
          <i class="fas fa-arrow-left"></i> Volver al listado
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
